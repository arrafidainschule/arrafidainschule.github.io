<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>عن المدرسة - مَدْرَسَةُ الرَّافِدَينِ العَرَبِيَّة</title>
<link rel="stylesheet" href="style.css" />
<link rel="icon" type="image/png" sizes="96x96" href="logo/favicon-96x96.png">
</head>
<body>

<!-- ===== HEADER START ===== -->
<div id="header-placeholder"></div>
<!-- ===== HEADER END ===== -->


<main>
  <h1>موقع المدرسة</h1>
  <!-- Here WeGo Karte einbetten -->
  <div id="mapContainer" style="width:100%; height:500px;"></div>

<script src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
<link rel="stylesheet" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />

<script>
  const apiKey = "funEmaMs8LYnXQgL5gn6FGNEzoGHUkOFSnHJP3tQkYw"; // <-- API-Key einsetzen
  const platform = new H.service.Platform({ apikey: apiKey });
  const defaultLayers = platform.createDefaultLayers();

  // Karte erstellen
  const map = new H.Map(
    document.getElementById("mapContainer"),
    defaultLayers.vector.normal.map,
    { center: { lat: 48.83101, lng: 9.19618 }, zoom: 16 }
  );

  // Interaktion aktivieren
  const behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
  H.ui.UI.createDefault(map, defaultLayers);

  // Marker für die Schule
  const schoolCoords = { lat: 48.83101, lng: 9.19618 };
  const schoolMarker = new H.map.Marker(schoolCoords);

  // Info-Bubble hinzufügen
  schoolMarker.setData("<b>Arrafidain Schule</b><br>Tapachstraße, Stuttgart");
  schoolMarker.addEventListener("tap", (evt) => {
    const bubble = new H.ui.InfoBubble(evt.target.getGeometry(), {
      content: evt.target.getData()
    });
    map.getUi().addBubble(bubble);
  });

  map.addObject(schoolMarker);
</script>

 <!-- Eingabe für Startadresse -->
<input id="start" type="text" placeholder="Ihre Startadresse eingeben" style="width:300px; padding:5px; margin:10px;" />
<button onclick="calculateRoute()">Route anzeigen</button>

<!-- Karte -->
<div id="mapContainer" style="width: 100%; height: 500px; margin-top:10px;"></div>

<!-- HERE Maps Bibliotheken -->
<script src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
<script src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
<link rel="stylesheet" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />

<script>
  const apiKey = "funEmaMs8LYnXQgL5gn6FGNEzoGHUkOFSnHJP3tQkYw"; // <-- Hier deinen HERE API-Key einsetzen
  const platform = new H.service.Platform({ apikey: apiKey });
  const defaultLayers = platform.createDefaultLayers();

  // Karte vorbereiten (Schule als Mittelpunkt)
  const map = new H.Map(
    document.getElementById("mapContainer"),
    defaultLayers.vector.normal.map,
    { center: { lat: 48.83101, lng: 9.19618 }, zoom: 13 }
  );

  // Interaktionen aktivieren
  const behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
  H.ui.UI.createDefault(map, defaultLayers);

  const router = platform.getRoutingService(null, 8);
  const searchService = platform.getSearchService();

  // Zielort: deine Schule
  const schoolCoords = { lat: 48.83101, lng: 9.19618 };

  let routeLine;

  function calculateRoute() {
    const query = document.getElementById("start").value;

    // Adresse → Koordinaten suchen
    searchService.geocode({ q: query }, (result) => {
      if (result.items.length > 0) {
        const startCoords = result.items[0].position;

        const routeParams = {
          transportMode: "car",
          origin: `${startCoords.lat},${startCoords.lng}`,
          destination: `${schoolCoords.lat},${schoolCoords.lng}`,
          return: "polyline,summary"
        };

        router.calculateRoute(routeParams, (r) => {
          if (r.routes.length) {
            if (routeLine) map.removeObject(routeLine);

            const section = r.routes[0].sections[0];
            const linestring = H.geo.LineString.fromFlexiblePolyline(section.polyline);
            routeLine = new H.map.Polyline(linestring, { style: { strokeColor: "blue", lineWidth: 4 } });

            // Marker setzen
            const startMarker = new H.map.Marker(startCoords);
            const destMarker = new H.map.Marker(schoolCoords);

            map.removeObjects(map.getObjects());
            map.addObjects([routeLine, startMarker, destMarker]);

            // Auf Route zoomen
            map.getViewModel().setLookAtData({ bounds: routeLine.getBoundingBox() });
          }
        }, alert);
      } else {
        alert("Adresse nicht gefunden.");
      }
    }, alert);
  }
</script>

  
  <h1>عن المدرسة</h1>
  <p>مدرستنا تأسست عام ٢٠٠٥ في مدينة شتوتغارت بهدف تعليم الناشئة اللغة العربية وتعريفهم بثقافة اللغة وجمالياتها.</p>
</main>

<!-- ===== FOOTER START ===== -->
<div id="footer-placeholder"></div>
<!-- ===== FOOTER END ===== -->
  
<script src="script.js"></script>
</body>
</html>
